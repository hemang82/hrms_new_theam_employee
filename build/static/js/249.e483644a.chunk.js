"use strict";(self.webpackChunkAdmin_Panel=self.webpackChunkAdmin_Panel||[]).push([[249],{48321:(e,l,s)=>{s.r(l),s.d(l,{default:()=>f});var a=s(89379),i=s(9950),o=(s(4695),s(28429)),d=s(9449),c=(s(20404),s(12815),s(97514),s(82391)),t=s(52610),n=s(79739),r=(s(40078),s(34263),s(32003)),m=(s(25825),s(70591)),u=s(82543),v=s(82569),p=s(59091),h=(s(77923),s(98631),s(61977)),E=s(45648),N=s(4159),x=s.n(N),b=s(90607),j=s(44414);function f(){var e,l,s,N,f,A;const _=(0,o.Zp)(),y=(0,v.wA)(),g=(0,o.zy)(),{adminEmployeeList:{data:w}}=(0,v.d4)(e=>e.masterslice),{userDetails:{data:L}}=(0,v.d4)(e=>e.masterslice),[S,D]=(0,i.useState)(null),[O,C]=(0,i.useState)(""),[T,M]=(0,i.useState)(null),[R,Y]=(0,i.useState)(""),[P,I]=(0,i.useState)(!1),[F,H]=(0,i.useState)(!1),[k,V]=(0,i.useState)(x()()),[G,q]=(0,i.useState)(x()()),[U,B]=(0,i.useState)(null);var W=null===g||void 0===g?void 0:g.state;const{register:Z,handleSubmit:X,setValue:z,clearErrors:K,reset:Q,watch:J,control:$,trigger:ee,formState:{errors:le}}=(0,d.mN)();(0,i.useEffect)(()=>{B(L||null),z(null===u.ic||void 0===u.ic?void 0:u.ic.EMPLOYEE_ID,L.employee_id),z(null===u.ic||void 0===u.ic?void 0:u.ic.EMPLOYEE,L.emp_id)},[L,w]),(0,i.useEffect)(()=>{W&&(y((0,p.iC)(!0)),(0,t.oz)({employee_id:null===W||void 0===W?void 0:W.id.toString()}).then(e=>{if((null===e||void 0===e?void 0:e.code)==r.NC.SUCCESS){let l=null===e||void 0===e?void 0:e.data;z(null===u.ic||void 0===u.ic?void 0:u.ic.NAME,null===l||void 0===l?void 0:l.name),z(null===u.ic||void 0===u.ic?void 0:u.ic.EMAIL,null===l||void 0===l?void 0:l.email),z(null===u.ic||void 0===u.ic?void 0:u.ic.MOBILE,null===l||void 0===l?void 0:l.phone_number),z(null===u.ic||void 0===u.ic?void 0:u.ic.CURRENT_ADDRESH,null===l||void 0===l?void 0:l.location),z(null===u.ic||void 0===u.ic?void 0:u.ic.GENDER,(null===l||void 0===l?void 0:l.gender)||"M"),V(null!==l&&void 0!==l&&l.birth_date?x()(l.birth_date):null),z(null===u.ic||void 0===u.ic?void 0:u.ic.PASSWORD,null===l||void 0===l?void 0:l.password),z(null===u.ic||void 0===u.ic?void 0:u.ic.MONTHLY_SALARY,null===l||void 0===l?void 0:l.salary_monthly),z(null===u.ic||void 0===u.ic?void 0:u.ic.SENIOR_NAME,null===l||void 0===l?void 0:l.senior_name),z(null===u.ic||void 0===u.ic?void 0:u.ic.DESIGNATION,null===l||void 0===l?void 0:l.designation),q(null!==l&&void 0!==l&&l.joining_date?x()(l.joining_date):null),y((0,p.iC)(!1))}})),console.log("userData?.departmentuserData?.department",null===W||void 0===W?void 0:W.department)},[W]),console.log("userDetails",L);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(h.default,{isActive:P,message:"Please Wait"}),(0,j.jsxs)("div",{className:"container-fluid mw-100",children:[(0,j.jsx)(n.A,{title:W?"Edit Employee":"Add Employee",header:"Employee List",subHeaderOnlyView:W?"Edit Employee":"Add Employee"}),(0,j.jsxs)("div",{className:"row",children:[U&&(0,j.jsx)("div",{className:"col-12 justify-content-center",children:(0,j.jsx)("div",{className:"card  ",children:(0,j.jsxs)("div",{className:"p-3 row_2",children:[(0,j.jsx)("div",{className:"py-3 border-bottom chat-meta-user d-flex align-items-center justify-content-between mb-4",children:(0,j.jsx)("h5",{className:"text-secondary mb-0 fw-semibold fs-4",children:"Employee Leave Details"})}),(0,j.jsx)("div",{className:"row",children:[{label:"Casual Leave",value:null===U||void 0===U?void 0:U.casual},{label:"Compoff Leave",value:null===U||void 0===U?void 0:U.compoff},{label:"Total Leave",value:(Number(null===U||void 0===U?void 0:U.casual)||0)+(Number(null===U||void 0===U?void 0:U.compoff)||0)}].map((e,l)=>(0,j.jsx)("div",{className:"col-12 col-sm-6 col-md-3 col-lg-4 attendance_card",children:(0,j.jsx)("div",{className:"card border-1 zoom-in them-light shadow-sm",children:(0,j.jsxs)("div",{className:"p-2 text-center",children:[(0,j.jsx)("p",{className:"fw-semibold fs-4 text-custom-theam ",children:e.label}),(0,j.jsx)("h5",{className:"fw-semibold text-dark mb-0 fs-5",children:e.value||"-"})]})},l)}))})]})})}),(0,j.jsx)("div",{className:"col-12 justify-content-center",children:(0,j.jsx)("div",{className:"row justify-content-center ",children:(0,j.jsx)("form",{onSubmit:X(async e=>{try{y((0,p.iC)(!0));let l={employee_id:null===U||void 0===U?void 0:U.id,leave_type:e[u.ic.LEAVE_TYPE],leave_day:e[u.ic.LEAVE_DAY],start_date:(0,m.qr)(k,null===u.ow||void 0===u.ow?void 0:u.ow.DATE_LOCAL_DASH_TIME_FORMAT),end_date:(0,m.qr)(G,null===u.ow||void 0===u.ow?void 0:u.ow.DATE_LOCAL_DASH_TIME_FORMAT),half_leave_type:e[u.ic.HALF_DAY_TYPE]?e[u.ic.HALF_DAY_TYPE]:0,reason:e[u.ic.REASON]||""};W||(0,t.K2)(l).then(e=>{(null===e||void 0===e?void 0:e.code)==r.NC.SUCCESS?((0,c.k1)(null===e||void 0===e?void 0:e.message),_(null===b.R||void 0===b.R?void 0:b.R.LEAVE_LIST),y((0,p.NI)({})),y((0,p.iC)(!1))):(y((0,p.iC)(!1)),(0,c.uU)(e.message))})}catch(l){(0,c.uU)("Somthing went wrong")}}),children:(0,j.jsx)("div",{className:"card",children:(0,j.jsxs)("div",{className:"card-body",children:[(0,j.jsx)("div",{className:"row justify-content-center",children:(0,j.jsx)("div",{className:"col-auto",children:(0,j.jsx)("div",{className:"card shadow-sm custom-card"})})}),(0,j.jsxs)("div",{className:"row col-12 col-md-12 ",children:[(0,j.jsxs)("div",{className:"col-md-6 ",children:[(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsxs)("label",{htmlFor:"gender1",className:"form-label fw-semibold",children:["Employee Name",(0,j.jsx)("span",{className:"text-danger ms-1"})]}),(0,j.jsx)("div",{className:"input-group border rounded-1",children:(0,j.jsxs)("select",(0,a.A)((0,a.A)({id:"gender1",className:"form-control ps-2 p-2",autoComplete:"nope",disabled:!0},Z(u.ic.EMPLOYEE,{required:"Select employee"})),{},{onChange:e=>{const l=e.target.value,s=w.find(e=>String(e.id)===String(l));B(s||null),z(null===u.ic||void 0===u.ic?void 0:u.ic.EMPLOYEE_ID,s.employee_id)},children:[(0,j.jsx)("option",{value:"",children:"Select employee"}),(0,m.st)(w)]}))}),(0,j.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(e=le[u.ic.EMPLOYEE])||void 0===e?void 0:e.message})]}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsxs)("label",{htmlFor:"payment_status",className:"form-label fw-semibold",children:["Leave Type",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)("div",{className:"input-group border rounded-1",children:(0,j.jsx)("select",(0,a.A)((0,a.A)({id:"payment_status",className:"form-control ps-2",autoComplete:"off",style:{fontWeight:"600"}},Z(u.ic.LEAVE_TYPE,{required:"Select leave type"})),{},{children:(0,m.MT)(u.SB)}))}),(0,j.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(l=le[u.ic.LEAVE_TYPE])||void 0===l?void 0:l.message})]}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsxs)("label",{htmlFor:"payment_status",className:"form-label fw-semibold",children:["Leave Day",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)("div",{className:"input-group border rounded-1",children:(0,j.jsx)("select",(0,a.A)((0,a.A)({id:"payment_status",className:"form-control ps-2",autoComplete:"off",style:{fontWeight:"600"}},Z(u.ic.LEAVE_DAY,{required:"Select leave day"})),{},{children:(0,m.MT)(u.ZQ)}))}),(0,j.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(s=le[u.ic.LEAVE_DAY])||void 0===s?void 0:s.message})]}),"half"===J(u.ic.LEAVE_DAY)&&(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsxs)("label",{htmlFor:"payment_status",className:"form-label fw-semibold",children:["Half Day Type",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)("div",{className:"input-group border rounded-1",children:(0,j.jsx)("select",(0,a.A)((0,a.A)({id:"payment_status",className:"form-control ps-2",autoComplete:"off",style:{fontWeight:"600"}},Z(u.ic.HALF_DAY_TYPE,{required:"Select leave day"})),{},{children:(0,m.MT)(u.gi)}))}),(0,j.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(N=le[u.ic.HALF_DAY_TYPE])||void 0===N?void 0:N.message})]})]}),(0,j.jsxs)("div",{className:"col-md-6",children:[(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsxs)("label",{htmlFor:"lastname",className:"form-label fw-semibold",children:["Employee ID",(0,j.jsx)("span",{className:"text-danger ms-1"})]}),(0,j.jsx)("div",{className:"input-group border rounded-1",children:(0,j.jsx)("input",(0,a.A)((0,a.A)({name:u.ic.EMPLOYEE_ID,type:"text",className:"form-control ps-2",placeholder:"Enter employee id",autoComplete:"nope",disabled:!0},Z(u.ic.EMPLOYEE_ID,{required:"Enter employee id"})),{},{onChange:e=>(async(e,l)=>{let s=l;e===u.ic.PANCARD?s=l.replace(u.mZ.ONCHANGE_PANNUMBER_REGEX,""):e===u.ic.ADHARCARD?s=l.replace(u.mZ.ONCHANGE_AADHAR_REGEX,""):e!==u.ic.MOBILE&&e!==u.ic.MONTHLY_SALARY||(s=l.replace(u.mZ.ONCHANGE_MOBILE_REGEX,"")),z(e,s),K(e),await ee(e)})(u.ic.EMPLOYEE_ID,e.target.value)}))}),(0,j.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(f=le[u.ic.EMPLOYEE_ID])||void 0===f?void 0:f.message})]}),(0,j.jsxs)("div",{className:"row mb-4 g-3",children:[" ",(0,j.jsxs)("div",{className:"col-12 col-md-6",children:[(0,j.jsxs)("label",{htmlFor:"dob1",className:"form-label fw-semibold",children:["Start Date ",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)(E.A,{id:"dob1",className:"form-control custom-datepicker w-100",format:null===u.ow||void 0===u.ow?void 0:u.ow.DATE_FORMAT,value:k,onChange:e=>V(e),allowClear:!1,picker:"date"})]}),(0,j.jsxs)("div",{className:"col-12 col-md-6",children:[(0,j.jsxs)("label",{htmlFor:"dob2",className:"form-label fw-semibold",children:["End Date ",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)(E.A,{id:"dob2",className:"form-control custom-datepicker w-100",format:null===u.ow||void 0===u.ow?void 0:u.ow.DATE_FORMAT,value:G,onChange:e=>q(e),allowClear:!1,picker:"date"})]})]}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsxs)("label",{htmlFor:"product_name",className:"form-label fw-semibold",children:["Leave Reason ",(0,j.jsx)("span",{className:"text-danger ms-1",children:"*"})]}),(0,j.jsx)("div",{className:"input-group border rounded-1",children:(0,j.jsx)("textarea",(0,a.A)({className:"form-control ps-2",placeholder:"Enter leave reason",rows:4,autoComplete:"off"},Z(u.ic.REASON,(0,m.DX)(u.ic.REASON,(0,c.TM)("Enter leave reason")))))}),(0,j.jsx)("label",{className:"errorc ps-1 pt-1",children:null===(A=le[u.ic.REASON])||void 0===A?void 0:A.message})]})]}),(0,j.jsxs)("div",{className:"modal-footer justify-content-center mb-3",children:[(0,j.jsx)("button",{type:"button",className:"btn btn-danger m-2",onClick:()=>{_(b.R.LEAVE_LIST)},children:"Cancel"}),(0,j.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})]})})})})})]})]})]})}},58168:(e,l,s)=>{function a(){return a=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},a.apply(null,arguments)}s.d(l,{A:()=>a})},63662:(e,l,s)=>{function a(e,l){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,l){return e.__proto__=l,e},a(e,l)}s.d(l,{A:()=>a})},98631:(e,l,s)=>{s(9950),s(82569),s(82391),s(59091),s(70591),s(82543),s(44414)}}]);